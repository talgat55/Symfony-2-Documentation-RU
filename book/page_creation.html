
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Создание страниц в Symfony2 &mdash; Русская документация Symfony2</title>
    <link rel="stylesheet" href="../_static/css/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="top" title="Русская документация Symfony2" href="../index.html" />
    <link rel="up" title="Книга" href="index.html" />
    <link rel="next" title="Контроллер" href="controller.html" />
    <link rel="prev" title="Установка и настройка Symfony2" href="installation.html" /> 

    <meta content="Русская документация Symfony2 на SymfonyGuru. Документация обновляется еженевно." name="Description">

    <meta content="русская документация symfony2, перевод документации Symfony2, symfony2, symfony 2, symfony, components, symphony, symfony framework" name="Keywords">

    <script type="text/javascript" src="../_static/js/doc.js"></script>

    <link rel="stylesheet" href="../_static/css/doc.css">

  </head>

  <body>

  <div id="wrapper">

      <div id="header_index">

          <div id="logo">
              <h1>
                  <a href="/ru/">
                      <img src="../_static/images/logo.png" width="168" height="40" alt="Logo"/>
                      <span id="logo-text">ГУРУ</span>
                  </a>
              </h1>
          </div>
          <!-- /#logo -->

          <div id="menu">

              <div id="right_bg"></div>

              <ul>

                  <li>
                      <a href="/ru/">Главная</a>
                  </li>

                  <li>
                      <a href="/blog/ru/">Блог</a>
                  </li>

                  <li>
                      <a href="/content/ru/about/">О проекте</a>
                  </li>

              </ul>
              <!-- /#menu ul -->

          </div>
          <!-- /#menu -->

          <div id="header_info" class="blog_info">

              <div class="left">
                  <a href="/ru/">Главная</a> /
                  <a href="/documentation/ru/html/index.html">Русская документация Symfony2</a>
              </div>

              <div class="right">
                  Сменить язык:
                  <a href="/documentation/en/html/index.html" class="en">EN</a>
              </div>

          </div>
          <!-- /#header_info -->

      </div>
      <!-- /#header -->

      <div id="top_box_index">

          <span class="top_box_top"></span>
          <!-- /.top_box_top - adds the top Background -->

          <div class="content">

              <div class="top_box_block" style="width: 100%;">

                  <h4>Русская документация Symfony2 на SymfonyGuru</h4>

                  <p style="width: 100%;">
                      <b>Дата последнего обновления: 2012-07-16.</b>
                      <!--
                      <br/>
                      Принять участие в переводе документации Symfony2 на русский язык
                      <a href="https://github.com/avalanche123/symfony-docs-ru/blob/master/README.rst" target="_blank">
                          может любой желающий
                      </a>.
                      -->
                  </p>

              </div>
              <!-- /.content .top_box_block -->

          </div>
          <!-- /#top_box .content -->

      </div>
      <!-- /#top_box -->

      <div id="content">
          
  <div class="section" id="symfony2">
<span id="index-0"></span><h1>Создание страниц в Symfony2<a class="headerlink" href="#symfony2" title="Ссылка на этот заголовок">¶</a></h1>
<p>Создание новой страницы в Symfony2 это простой процесс, состоящий из 2 шагов:</p>
<ul class="simple">
<li><em>Создание маршрута</em>: Маршрут определяет URL (например <tt class="docutils literal"><span class="pre">/about</span></tt>) для вашей
страницы, а также контроллер (PHP функция), который Symfony2 должен выполнить,
когда URL входящего запроса совпадет шаблоном маршрута;</li>
<li><em>Создание контроллера</em>: Контроллер – это PHP функция, которая принимает входящий
запрос и преобразует его в объект <tt class="docutils literal"><span class="pre">Response</span></tt>, который будет возвращен
пользователю.</li>
</ul>
<p>Нам нравится такой подход, потому что он соответствует тому, как работает Web.
Каждое взаимодействие в Web инициализируется HTTP запросом. Забота вашего
приложения – интерпретировать запрос и вернуть соответствующий ответ.</p>
<p>Symfony2 следует этой философии и предоставляет вам инструменты и соглашения,
для того чтобы ваше приложение оставалось хорошо структурированным при росте
его посещаемости и сложности.</p>
<p>Звучит просто? Давайте копнём по глубже!</p>
<div class="section" id="hello-symfony">
<span id="index-1"></span><h2>Страница &#8220;Hello Symfony!&#8221;<a class="headerlink" href="#hello-symfony" title="Ссылка на этот заголовок">¶</a></h2>
<p>Давайте начнем с классического приложения &#8220;Hello World!&#8221;. Когда вы закончите работу
над ним, пользователь приложения будет иметь возможность получить персональное
приветствие, (например &#8220;Hello Symfony&#8221;), перейдя по следующему URL:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app_dev.php/hello/Symfony
</pre></div>
</div>
<p>Вы также сможете заменить <tt class="docutils literal"><span class="pre">Symfony</span></tt> на другое имя и получить новое приветствие.
Для создания этой страницы мы пройдем простой путь из двух шагов.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Данное руководство подразумевает, что вы уже скачали Symfony2 и настроили ваш
веб-сервер. URL, указанный выше, подразумевает, что localhost указывает на
web-директорию вашего нового Symfony2 проекта. Если же вы ещё не выполнили
этих шагов, рекомендуется их выполнить, прежде чем вы продолжите чтение.
Дополнительную информацию вы можете найти в главе
<a class="reference internal" href="installation.html"><em>Установка и настройка Symfony2</em></a>.</p>
</div>
<div class="section" id="bundle">
<h3>Прежде чем начать: создание Пакета (bundle)<a class="headerlink" href="#bundle" title="Ссылка на этот заголовок">¶</a></h3>
<p>Прежде чем начать, вам необходимо создать пакет (<em class="xref std std-term">bundle</em>). В Symfony2 пакет
напоминает plugin, за исключением того, что весь код вашего приложения будет
расположен внутри такого пакета.</p>
<p>Вообще говоря, пакет – это не более чем директория, которая содержит все что
относится к какой-то специфической функции, включая PHP-классы, настройки и
даже стили и файлы Javascript (см. <a class="reference internal" href="#page-creation-bundles"><em>Система пакетов</em></a>).</p>
<p>Для создания пакета с именем <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt> (демо-пакет, который
вы создадите в ходе прочтения данной статьи), необходимо выполнить
следующую команду и следовать инструкциям, которые появятся на
экране (установите все опции по-умолчанию):</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console generate:bundle --namespace<span class="o">=</span>Acme/HelloBundle --format<span class="o">=</span>yml
</pre></div>
</div>
<p>За кулисами же произойдёт вот что: будет создана директория для пакета
<tt class="docutils literal"><span class="pre">src/Acme/HelloBundle</span></tt>. Также в файл <tt class="docutils literal"><span class="pre">app/AppKernel.php</span></tt> автоматически
будет добавлена строка, которая зарегистрирует вновь созданный пакет:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// app/AppKernel.php</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">registerBundles</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$bundles</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="c1">// ...</span>
        <span class="k">new</span> <span class="nx">Acme\HelloBundle\AcmeHelloBundle</span><span class="p">(),</span>
    <span class="p">);</span>
    <span class="c1">// ...</span>

    <span class="k">return</span> <span class="nv">$bundles</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Теперь, когда вы создали и инициализировали пакет, вы можете приступить к созданию
вашего приложения.</p>
</div>
<div class="section" id="id1">
<h3>Шаг 1: Создание маршрута<a class="headerlink" href="#id1" title="Ссылка на этот заголовок">¶</a></h3>
<p>По умолчанию, конфигурационный файл маршрутизатора в приложении Symfony2,
располагается в <tt class="docutils literal"><span class="pre">app/config/routing.yml</span></tt>. Для конфигурирования маршрутизатора,
а также любых прочих конфигураций Symfony2, вы можете также использовать
XML или PHP формат.</p>
<p>Если вы посмотрите в основной конфигурационный файл, вы увидите, что Symfony
уже добавил запись для сгенерированного <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/routing.yml</span>
<span class="l-Scalar-Plain">AcmeHelloBundle</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">resource</span><span class="p-Indicator">:</span> <span class="s">&quot;@AcmeHelloBundle/Resources/config/routing.yml&quot;</span>
    <span class="l-Scalar-Plain">prefix</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/routing.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;@AcmeHelloBundle/Resources/config/routing.xml&quot;</span> <span class="na">prefix=</span><span class="s">&quot;/&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// app/config/routing.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">addCollection</span><span class="p">(</span>
    <span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;@AcmeHelloBundle/Resources/config/routing.php&#39;</span><span class="p">),</span>
    <span class="s1">&#39;/&#39;</span><span class="p">,</span>
<span class="p">);</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Эта запись очень проста: она сообщает Symfony, что необходимо загрузить конфигурацию
маршрутизатора из файла <tt class="docutils literal"><span class="pre">Resources/config/routing.yml</span></tt>, который расположен в
пакете <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt>. Это означает, что вы можете размешать конфигурацию
маршрутизатора непосредственно в <tt class="docutils literal"><span class="pre">app/config/routing.yml</span></tt> или же хранить
маршруты внутри пакета и импортировать их оттуда.</p>
<p>Теперь, когда файл <tt class="docutils literal"><span class="pre">routing.yml</span></tt> импортирован из пакета, добавьте новый маршрут,
который определит URL страницы, которую вы собираетесь создать:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Acme/HelloBundle/Resources/config/routing.yml</span>
<span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/hello/{name}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeHelloBundle</span><span class="p-Indicator">:</span><span class="nv">Hello</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/HelloBundle/Resources/config/routing.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;hello&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/hello/{name}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeHelloBundle:Hello:index<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// src/Acme/HelloBundle/Resources/config/routing.php</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\RouteCollection</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Route</span><span class="p">;</span>

<span class="nv">$collection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RouteCollection</span><span class="p">();</span>
<span class="nv">$collection</span><span class="o">-&gt;</span><span class="na">add</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Route</span><span class="p">(</span><span class="s1">&#39;/hello/{name}&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;_controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;AcmeHelloBundle:Hello:index&#39;</span><span class="p">,</span>
<span class="p">)));</span>

<span class="k">return</span> <span class="nv">$collection</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Маршрут состоит из двух основных частей: шаблона (<tt class="docutils literal"><span class="pre">pattern</span></tt>), с которым
сравнивается URL, а также массива параметров по умолчанию (<tt class="docutils literal"><span class="pre">defaults</span></tt>), в котором
указывается контроллер, который необходимо выполнить. Заполнитель <tt class="docutils literal"><span class="pre">{name}</span></tt>
в шаблоне – это метасимвол (wildcard). Он означает, что URL <tt class="docutils literal"><span class="pre">/hello/Ryan</span></tt>,
<tt class="docutils literal"><span class="pre">/hello/Fabien</span></tt>, а также прочие, похожие на них, будут соответствовать этому
же маршруту. Параметр, определённый заполнителем <tt class="docutils literal"><span class="pre">{name}</span></tt>, также будет передан
в контроллер, так что вы сможете использовать его, чтобы поприветствовать
пользователя.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Система маршрутизации имеет еще множество замечательных функций для создания
гибких и функциональных структур URL в приложении. За дополнительной информацией
вы можете обратиться к главе <a class="reference internal" href="routing.html"><em>Маршрутизация</em></a>.</p>
</div>
</div>
<div class="section" id="id2">
<h3>Шаг 2: Создание Контроллера<a class="headerlink" href="#id2" title="Ссылка на этот заголовок">¶</a></h3>
<p>Когда URI вида <tt class="docutils literal"><span class="pre">/hello/Ryan</span></tt> обнаруживается приложением в запросе, маршрут
<tt class="docutils literal"><span class="pre">hello</span></tt> совпадёт с ним и будет вызван контроллер <tt class="docutils literal"><span class="pre">AcmeHelloBundle:Hello:index</span></tt>.
Следующим вашим шагом будет создание этого контроллера.</p>
<p>Контроллер <tt class="docutils literal"><span class="pre">AcmeHelloBundle:Hello:index</span></tt> - это <em>логическое</em> имя контроллера
и оно соответствует методу <tt class="docutils literal"><span class="pre">indexAction</span></tt> PHP-класса, именуемого
<tt class="docutils literal"><span class="pre">Acme\HelloBundle\Controller\Hello</span></tt>. Приступим к созданию этого файла внутри
<tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// src/Acme/HelloBundle/Controller/HelloController.php</span>
<span class="k">namespace</span> <span class="nx">Acme\HelloBundle\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HelloController</span>
<span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
<p>В действительности, контроллер – это не что иное, как метод PHP класса, который вы
создаёте, а Symfony выполняет. Это то место, где ваш код, используя информацию из
запроса, создает запрошенный ресурс. За исключением некоторых особых случаев,
результатом работы контроллера всегда является объект Symfony2 <tt class="docutils literal"><span class="pre">Response</span></tt>.</p>
<p>Создайте метод <tt class="docutils literal"><span class="pre">indexAction</span></tt>, который Symfony выполнит, когда сработает
маршрут <tt class="docutils literal"><span class="pre">hello</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// src/Acme/HelloBundle/Controller/HelloController.php</span>

<span class="c1">// ...</span>
<span class="k">class</span> <span class="nc">HelloController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s1">&#39;&lt;html&gt;&lt;body&gt;Hello &#39;</span><span class="o">.</span><span class="nv">$name</span><span class="o">.</span><span class="s1">&#39;!&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Этот контроллер предельно прост: он создает новый объект <tt class="docutils literal"><span class="pre">Response</span></tt>, чьим
первым аргументом является контент, который будет использован для создания
ответа (в нашем случае это маленькая HTML-страница, код которой мы указали прямо
в контроллере).</p>
<p>Примите наши поздравления! После создания всего лишь маршрута и контроллера,
вы уже имеете полноценную страницу! Если вы все настроили корректно, ваше
приложение должно поприветствовать вас:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app_dev.php/hello/Ryan
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Совет</p>
<p>Вы также можете отобразить ваше приложение в <a class="reference internal" href="#environments-summary"><em>&#8220;продуктовом (prod)&#8221; окружении</em></a>,
посетив следующий URL:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app.php/hello/Ryan
</pre></div>
</div>
<p>Если вы увидите ошибку, то скорее всего вам всего лишь необходимо
очистить кэш, выполнив команду:</p>
<div class="last highlight-bash"><div class="highlight"><pre>php app/console cache:clear --env<span class="o">=</span>prod --no-debug
</pre></div>
</div>
</div>
<p>Не обязательным (но, как правило, востребованным) третьим шагом является создание шаблона.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Контроллер – это главная точка входа для вашего кода и ключевой ингредиент
при создании страниц. Больше информации о контроллерах вы можете найти
в главе <a class="reference internal" href="controller.html"><em>Контроллер</em></a>.</p>
</div>
</div>
<div class="section" id="id3">
<h3>Необязательный шаг 3: Создание шаблона<a class="headerlink" href="#id3" title="Ссылка на этот заголовок">¶</a></h3>
<p>Шаблоны позволяют нам вынести разметку страниц (HTML код, как правило) в
отдельный файл и повторно использовать различные части шаблона страницы.
Вместо того чтобы писать код внутри контроллера, воспользуемся шаблоном:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// src/Acme/HelloBundle/Controller/HelloController.php</span>
<span class="k">namespace</span> <span class="nx">Acme\HelloBundle\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HelloController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;AcmeHelloBundle:Hello:index.html.twig&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">));</span>

        <span class="c1">// render a PHP template instead</span>
        <span class="c1">// return $this-&gt;render(&#39;AcmeHelloBundle:Hello:index.html.php&#39;, array(&#39;name&#39; =&gt; $name));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Для того, чтобы использовать метод <tt class="docutils literal"><span class="pre">render()</span></tt>, необходимо отнаследоваться от
класса <tt class="docutils literal"><span class="pre">Symfony\Bundle\FrameworkBundle\Controller\Controller</span></tt>
(API docs: <tt class="xref py py-class docutils literal"><span class="pre">Symfony\Bundle\FrameworkBundle\Controller\Controller</span></tt>),
который добавляет несколько методов для быстрого вызова часто употребляемых
функций контроллера. В предыдущем примере это достигается путём добавления выражения
<tt class="docutils literal"><span class="pre">use</span></tt> в строке 6 и, затем, наследованием от класса <tt class="docutils literal"><span class="pre">Controller</span></tt> в строке 8.</p>
</div>
<p>Метод <tt class="docutils literal"><span class="pre">render()</span></tt> создает объект <tt class="docutils literal"><span class="pre">Response</span></tt>, заполненный результатом обработки (рендеринга)
шаблона. Как и в любом другом контроллере, вы, в конце концов, вернете объект <tt class="docutils literal"><span class="pre">Response</span></tt>.</p>
<p>Обратите внимание, что есть две различные возможности рендеринга шаблонов.
Symfony2 по умолчанию, поддерживает 2 языка шаблонов: классические PHP-шаблоны и
простой, но мощный язык шаблонов <a class="reference external" href="http://twig.sensiolabs.org">Twig</a>. Но не пугайтесь, вы свободны в выборе
того или иного из них, кроме того вы можете использовать оба в рамках одного проекта.</p>
<p>Контроллер отображает шаблон <tt class="docutils literal"><span class="pre">AcmeHelloBundle:Hello:index.html.twig</span></tt>, который
назван с использованием следующих соглашений:</p>
<blockquote>
<div><strong>BundleName</strong>:<strong>ControllerName</strong>:<strong>TemplateName</strong></div></blockquote>
<p>Это, так называемое, логическое имя шаблона, которое соответствует физическому файлу
на основании следующих соглашений:</p>
<blockquote>
<div><strong>/путь/к/BundleName</strong>/Resources/views/<strong>ControllerName</strong>/<strong>TemplateName</strong></div></blockquote>
<p>В нашем случае <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt> - это наименование пакета, <tt class="docutils literal"><span class="pre">Hello</span></tt> - это
контроллер и <tt class="docutils literal"><span class="pre">index.html.twig</span></tt> - это шаблон:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-jinja"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="x"> </span><span class="c">{# src/Acme/HelloBundle/Resources/views/Hello/index.html.twig #}</span><span class="x"></span>
<span class="x"> </span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;::base.html.twig&#39;</span> <span class="cp">%}</span><span class="x"></span>

<span class="x"> </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">     Hello </span><span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="x">!</span>
<span class="x"> </span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">&lt;!-- src/Acme/HelloBundle/Resources/views/Hello/index.html.php --&gt;</span>
<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">extend</span><span class="p">(</span><span class="s1">&#39;::base.html.php&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">Hello </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">escape</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">!</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Давайте рассмотрим подробнее шаблон Twig:</p>
<ul class="simple">
<li><em>строка 2</em>: Токен <tt class="docutils literal"><span class="pre">extends</span></tt> определяет родительский шаблон. Таким образом, сам шаблон
однозначным образом определяет родителя (layout) внутрь которого он будет помещен.</li>
<li><em>строка 4</em>: Токен <tt class="docutils literal"><span class="pre">block</span></tt> означает, что всё внутри него будет помещено в блок с
именем <tt class="docutils literal"><span class="pre">body</span></tt>. Как вы увидите ниже, это уже обязанность родительского шаблона
(<tt class="docutils literal"><span class="pre">base.html.twig</span></tt>) – полностью отобразить блок <tt class="docutils literal"><span class="pre">body</span></tt>.</li>
</ul>
<p>Родительский шаблон, <tt class="docutils literal"><span class="pre">::base.html.twig</span></tt>, не включает в себя ни <strong>имени пакета</strong>,
ни <strong>имени контроллера</strong> (отсюда и двойное двоеточие в начале имени (::)). Это означает,
что шаблон располагается вне пакета в директории <tt class="docutils literal"><span class="pre">app</span></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/Resources/views/base.html.twig #}</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Welcome!<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="nt">&lt;/title&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">stylesheets</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;shortcut icon&quot;</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;favicon.ico&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">javascripts</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">&lt;!-- app/Resources/views/base.html.php --&gt;</span>
<span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">    &lt;head&gt;</span>
<span class="x">        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;</span>
<span class="x">        &lt;title&gt;</span><span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;Welcome!&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&lt;/title&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;stylesheets&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        &lt;link rel=&quot;shortcut icon&quot; href=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;assets&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">getUrl</span><span class="p">(</span><span class="s1">&#39;favicon.ico&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;</span>
<span class="x">    &lt;/head&gt;</span>
<span class="x">    &lt;body&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;_content&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;stylesheets&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Базовый шаблон определяет HTML-разметку и отображает блок <tt class="docutils literal"><span class="pre">body</span></tt>, который
вы определили в шаблоне <tt class="docutils literal"><span class="pre">index.html.twig</span></tt>. Так как вы не определили блок
<tt class="docutils literal"><span class="pre">title</span></tt> в дочернем шаблоне, он останется со значением по умолчанию - &#8220;Welcome!&#8221;.</p>
<p>Шаблоны являются мощным инструментом по организации и отображению контента ваших страниц.
Шаблон может отобразить всё что угодно от HTML разметки, до CSS-кода или что контроллеру
будет угодно.</p>
<p>В жизненном цикле обработки запроса, шаблонизатор - это всего лишь опциональный
инструмент. Не забывайте, что цель каждого контроллера - вернуть объект <tt class="docutils literal"><span class="pre">Response</span></tt>.
Шаблоны являются мощным инструментом, но они опциональны, всего лишь инструмент для
создания контента для объекта <tt class="docutils literal"><span class="pre">Response</span></tt>.</p>
</div>
</div>
<div class="section" id="index-2">
<span id="id4"></span><h2>Структура директорий<a class="headerlink" href="#index-2" title="Ссылка на этот заголовок">¶</a></h2>
<p>Всего лишь после прочтения нескольких коротких секций вы уже уяснили философию
создания и отображения страниц в Symfony2. Поэтому без лишних слов мы приступим к
изучению того, как организованы и структурированы проекты Symfony2. К концу этой
секции вы будете знать, где найти и куда поместить различные типы файлов.
И более того, будет понимать – почему!</p>
<p>По умолчанию каждое Symfony приложение (<em class="xref std std-term">application</em>), изначально созданное быть
очень гибким, имеет одну и ту же базовую (и рекомендуемую) структуру директорий:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">app/</span></tt>: Эта директория содержит настройки приложения;</li>
<li><tt class="docutils literal"><span class="pre">src/</span></tt>: Весь PHP код проекта находится в этой директории;</li>
<li><tt class="docutils literal"><span class="pre">vendor/</span></tt>: Здесь размещаются сторонние библиотеки;</li>
<li><tt class="docutils literal"><span class="pre">web/</span></tt>: Это корневая директория, видимая web-серверу и содержащая доступные пользователям файлы;</li>
</ul>
<div class="section" id="web">
<h3>Директория Web<a class="headerlink" href="#web" title="Ссылка на этот заголовок">¶</a></h3>
<p>Web-директория – это дом для всех публично-доступных статических файлов,
таких как изображения, таблицы стилей и JavaScript файлы.
Тут также располагаются все фронт-контроллеры (<em class="xref std std-term">front controller</em>):</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// web/app.php</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span><span class="o">.</span><span class="s1">&#39;/../app/bootstrap.php.cache&#39;</span><span class="p">;</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span><span class="o">.</span><span class="s1">&#39;/../app/AppKernel.php&#39;</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Request</span><span class="p">;</span>

<span class="nv">$kernel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AppKernel</span><span class="p">(</span><span class="s1">&#39;prod&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
<span class="nv">$kernel</span><span class="o">-&gt;</span><span class="na">loadClassCache</span><span class="p">();</span>
<span class="nv">$kernel</span><span class="o">-&gt;</span><span class="na">handle</span><span class="p">(</span><span class="nx">Request</span><span class="o">::</span><span class="na">createFromGlobals</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
</pre></div>
</div>
<p>Файл фронт-контроллера (в примере выше – <tt class="docutils literal"><span class="pre">app.php</span></tt>)- это PHP файл, который
выполняется, когда используется Symfony2 приложение и в его обязанности входит
использование Kernel-класса(<tt class="docutils literal"><span class="pre">AppKernel</span></tt>), для запуска приложения.</p>
<div class="admonition tip">
<p class="first admonition-title">Совет</p>
<p>Наличие фронт-контроллера означает возможность использования более гибких URL,
отличных от тех, что используются в типичном &#8220;плоском&#8221; PHP-приложении.
Когда используется фронт-контроллер, URL формируется следующим образом:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app.php/hello/Ryan
</pre></div>
</div>
<p>Фронт-контроллер <tt class="docutils literal"><span class="pre">app.php</span></tt> выполняется и &#8220;внутренний:&#8221; URL <tt class="docutils literal"><span class="pre">/hello/Ryan</span></tt>
направляется внутри приложения с использованием конфигурации маршрутизатора.
С использованием правил mod_rewrite для Apache вы можете перенаправлять
все запросы (на физически не существующие URL) на app.php, чтобы явно не
указывать его в URL:</p>
<div class="last highlight-text"><div class="highlight"><pre>http://localhost/hello/Ryan
</pre></div>
</div>
</div>
<p>Хотя фронт-контроллеры имеют важное значение при обработке каждого запроса,
вам нечасто придется модифицировать их или вообще вспоминать об их существовании.
Мы еще вкратце упомянем о них в секции, где говорится об Окружениях (<a class="reference internal" href="#id9">Окружения</a>).</p>
</div>
<div class="section" id="app">
<h3>Директория приложения (<tt class="docutils literal"><span class="pre">app</span></tt>)<a class="headerlink" href="#app" title="Ссылка на этот заголовок">¶</a></h3>
<p>Как вы уже видели во фронт-контроллере, класс <tt class="docutils literal"><span class="pre">AppKernel</span></tt> – это точка входа
приложения и он отвечает за его конфигурацию. Как таковой, этот класс расположен
в директории <tt class="docutils literal"><span class="pre">app/</span></tt>.</p>
<p>Этот класс должен реализовывать два метода, которые определяют всё, что Symfony
необходимо знать о вашем приложении. Вам даже не нужно беспокоиться о реализации
этих методов, когда начинаете работу – они уже реализованы и содержат код по умолчанию.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">registerBundles()</span></tt>: Возвращает массив всех пакетов, необходимых для запуска
приложения (см. <a class="reference internal" href="#page-creation-bundles"><em>Система пакетов</em></a>);</li>
<li><tt class="docutils literal"><span class="pre">registerContainerConfiguration()</span></tt>: Загружает главный конфигурационный файл
(см. секцию <a class="reference internal" href="#id8">Конфигурация приложения</a>).</li>
</ul>
<p>Изо дня в день вы будете использовать директорию <tt class="docutils literal"><span class="pre">app/</span></tt> в основном для того,
чтобы модифицировать конфигурацию и настройки маршрутизатора в директории
<tt class="docutils literal"><span class="pre">app/config/</span></tt> (см. <a class="reference internal" href="#id8">Конфигурация приложения</a>). Также в <tt class="docutils literal"><span class="pre">app/</span></tt> содержится кэш
(<tt class="docutils literal"><span class="pre">app/cache</span></tt>), директория для логов (<tt class="docutils literal"><span class="pre">app/logs</span></tt>) и директория для ресурсов
уровня приложения (<tt class="docutils literal"><span class="pre">app/Resources</span></tt>). Об этих директориях подробнее будет
рассказано в других главах.</p>
<div class="sidebar" id="autoloading-introduction-sidebar">
<p class="first sidebar-title">Автозагрузка</p>
<p>При инициализации приложения подключается особый файл: <tt class="docutils literal"><span class="pre">app/autoload.php</span></tt>.
Этот файл отвечает за автозагрузку всех файлов из директорий <tt class="docutils literal"><span class="pre">src/</span></tt> и
<tt class="docutils literal"><span class="pre">vendor/</span></tt>.</p>
<p>Благодаря автозагрузке, вам больше не придется беспокоиться об использовании
выражений <tt class="docutils literal"><span class="pre">include</span></tt> или <tt class="docutils literal"><span class="pre">require</span></tt>. Вместо этого, Symfony2 использует
пространства имен классов, чтобы определить их расположение и автоматически
подключить файл класса, в случае если класс вам понадобится.</p>
<p>Автозагрузчик уже настроен для того, чтобы искать ваши классы в директории
<tt class="docutils literal"><span class="pre">src/</span></tt>. Для того чтобы автозагрузка работала, имя класса и путь к его
файлу должны следовать следующему шаблону:</p>
<div class="highlight-text"><div class="highlight"><pre>Class Name:
    Acme\HelloBundle\Controller\HelloController
Path:
    src/Acme/HelloBundle/Controller/HelloController.php
</pre></div>
</div>
<p class="last">Как правило, единственная ситуация, когда вам необходимо беспокоиться
о файле <tt class="docutils literal"><span class="pre">app/autoload.php</span></tt> - когда вы добавляете новую стороннюю
библиотеку в директорию <tt class="docutils literal"><span class="pre">vendor/</span></tt>. Если вы хотите узнать больше об
автозагрузке, обратите внимание на статью
<a class="reference internal" href="../cookbook/tools/autoloader.html"><em>Как автоматически загружать классы</em></a>.</p>
</div>
</div>
<div class="section" id="src">
<h3>Директория исходных кодов проекта (<tt class="docutils literal"><span class="pre">src</span></tt>)<a class="headerlink" href="#src" title="Ссылка на этот заголовок">¶</a></h3>
<p>Если вкратце, то директория <tt class="docutils literal"><span class="pre">src/</span></tt> содержит весь код <em>вашего</em> приложения
(PHP-код, шаблоны, конфигурационные файлы, стили и т.д.). Во время разработки,
бОльшую часть работ вы будете выполнять внутри одного или нескольких пакетов,
которые вы создадите именно в этой директории.</p>
<p>Но что же собственно из себя представляет сам пакет (<em class="xref std std-term">bundle</em>)?</p>
</div>
</div>
<div class="section" id="page-creation-bundles">
<span id="id5"></span><h2>Система пакетов<a class="headerlink" href="#page-creation-bundles" title="Ссылка на этот заголовок">¶</a></h2>
<p>Пакет чем-то схож с плагином, но он ещё лучше. Ключевое отличие состоит в том,
что <em>всё есть пакет</em> в Symfony2, включая функционал ядра и код вашего приложения.
Пакеты – это граждане высшего сорта в Symfony2. Они дают вам возможность
использовать уже готовые пакеты, которые вы можете найти на сайте <a class="reference external" href="http://symfony2bundles.org/">symfony2bundles.org</a>.
Вы также можете там выкладывать свои пакеты. Они также дают возможность легко и
просто выбрать, какие именно функции подключить в вашем приложении.</p>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Здесь мы рассмотрим лишь основы, более детальную информацию по пакетам вы можете
найти в статье <tt class="xref doc docutils literal"><span class="pre">пакеты</span></tt> в &#8220;книге рецептов&#8221;.</p>
</div>
<p>Пакет это просто структурированный набор файлов и директорий, который реализует
одну конкретную функцию. Вы можете создать <tt class="docutils literal"><span class="pre">BlogBundle</span></tt> или <tt class="docutils literal"><span class="pre">ForumBundle</span></tt> или же
пакет для управления пользователями (такие пакеты уже есть и даже с открытым исходным
кодом). Каждая директория содержит все необходимое для реализации этой конкретной
функции, включая PHP файлы, шаблоны, стили, клиентские скрипты, тесты и все что
ещё потребуется. Каждый аспект реализации функции находится в своём пакете и каждая
функция располагается в своем собственном пакете.</p>
<p>Приложение состоит из пакетов, которые объявлены в методе <tt class="docutils literal"><span class="pre">registerBundles()</span></tt>
класса <tt class="docutils literal"><span class="pre">AppKernel</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// app/AppKernel.php</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">registerBundles</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$bundles</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="k">new</span> <span class="nx">Symfony\Bundle\FrameworkBundle\FrameworkBundle</span><span class="p">(),</span>
        <span class="k">new</span> <span class="nx">Symfony\Bundle\SecurityBundle\SecurityBundle</span><span class="p">(),</span>
        <span class="k">new</span> <span class="nx">Symfony\Bundle\TwigBundle\TwigBundle</span><span class="p">(),</span>
        <span class="k">new</span> <span class="nx">Symfony\Bundle\MonologBundle\MonologBundle</span><span class="p">(),</span>
        <span class="k">new</span> <span class="nx">Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle</span><span class="p">(),</span>
        <span class="k">new</span> <span class="nx">Symfony\Bundle\DoctrineBundle\DoctrineBundle</span><span class="p">(),</span>
        <span class="k">new</span> <span class="nx">Symfony\Bundle\AsseticBundle\AsseticBundle</span><span class="p">(),</span>
        <span class="k">new</span> <span class="nx">Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle</span><span class="p">(),</span>
        <span class="k">new</span> <span class="nx">JMS\SecurityExtraBundle\JMSSecurityExtraBundle</span><span class="p">(),</span>
    <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getEnvironment</span><span class="p">(),</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;dev&#39;</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">)))</span> <span class="p">{</span>
        <span class="nv">$bundles</span><span class="p">[]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Acme\DemoBundle\AcmeDemoBundle</span><span class="p">();</span>
        <span class="nv">$bundles</span><span class="p">[]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Symfony\Bundle\WebProfilerBundle\WebProfilerBundle</span><span class="p">();</span>
        <span class="nv">$bundles</span><span class="p">[]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Sensio\Bundle\DistributionBundle\SensioDistributionBundle</span><span class="p">();</span>
        <span class="nv">$bundles</span><span class="p">[]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$bundles</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Используя метод <tt class="docutils literal"><span class="pre">registerBundles()</span></tt>, вы получаете полный контроль над теми пакетами,
которые используются вашим приложением (включая пакеты, входящие в состав ядра Symfony).</p>
<div class="admonition tip">
<p class="first admonition-title">Совет</p>
<p class="last">Вообще говоря, пакет может располагаться где угодно, если автозагрузчик
(<tt class="docutils literal"><span class="pre">app/autoload.php</span></tt>) можно настроить таким образом, чтобы этот пакет
мог быть загружен.</p>
</div>
<div class="section" id="id6">
<h3>Создание пакета<a class="headerlink" href="#id6" title="Ссылка на этот заголовок">¶</a></h3>
<p>Symfony Standard Edition содержит удобную команду для создания пакета. Тем не менее,
создать пакет вручную лишь немногим больше и ничуть не сложнее.</p>
<p>Чтобы показать вам, как проста система пакетов, давайте создадим новый
пакет, назовём его <tt class="docutils literal"><span class="pre">AcmeTestBundle</span></tt> и активируем его.</p>
<div class="admonition tip">
<p class="first admonition-title">Совет</p>
<p class="last"><tt class="docutils literal"><span class="pre">Acme</span></tt> это всего-лишь формальное имя, которое должно быть заменено
на наименование некоего вендора, которое будет представлять вашу организацию
(например <tt class="docutils literal"><span class="pre">ABCTestBundle</span></tt> для компании <tt class="docutils literal"><span class="pre">ABC</span></tt>).</p>
</div>
<p>В первую очередь, создадим директорию <tt class="docutils literal"><span class="pre">src/Acme/TestBundle/</span></tt> и добавим
в неё файл <tt class="docutils literal"><span class="pre">AcmeTestBundle.php</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// src/Acme/TestBundle/AcmeTestBundle.php</span>
<span class="k">namespace</span> <span class="nx">Acme\TestBundle</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\HttpKernel\Bundle\Bundle</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">AcmeTestBundle</span> <span class="k">extends</span> <span class="nx">Bundle</span>
<span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Совет</p>
<p class="last">Наименование класса <tt class="docutils literal"><span class="pre">AcmeTestBundle</span></tt> следует стандарту
<em class="xref std std-ref">Именования Пакетов</em>. Вы также можете сократить
наименование пакета до <tt class="docutils literal"><span class="pre">TestBundle</span></tt>, назвав класс <tt class="docutils literal"><span class="pre">TestBundle</span></tt>
(и переименовав файл в <tt class="docutils literal"><span class="pre">TestBundle.php</span></tt>).</p>
</div>
<p>Этот пустой класс – единственное, что необходимо создать для минимальной комплектации
пакета. Не смотря на то, что класс пуст, он обладает большим потенциалом и позволяет
настраивать поведение пакета.</p>
<p>Теперь, когда мы создали пакет, его нужно активировать в классе <tt class="docutils literal"><span class="pre">AppKernel</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// app/AppKernel.php</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">registerBundles</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$bundles</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="c1">// ...</span>

        <span class="c1">// register your bundles</span>
        <span class="k">new</span> <span class="nx">Acme\TestBundle\AcmeTestBundle</span><span class="p">(),</span>
    <span class="p">);</span>
    <span class="c1">// ...</span>

    <span class="k">return</span> <span class="nv">$bundles</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>И, хотя наш новый пакет пока ничего не делает, <tt class="docutils literal"><span class="pre">AcmeTestBundle</span></tt> готов к
использованию.</p>
<p>Symfony также предлагает интерфейс для командной строки для создания
базового скелетона пакета:</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console generate:bundle --namespace<span class="o">=</span>Acme/TestBundle
</pre></div>
</div>
<p>Каркас пакета создаёт базовый контроллер, шаблон и маршрут, которые можно
настроить впоследствии. Мы еще вернёмся к инструментам командной строки позже.</p>
<div class="admonition tip">
<p class="first admonition-title">Совет</p>
<p class="last">Когда создаёте новый пакет, или используете сторонние пакеты, убедитесь,
что пакет активирован в registerBundles(). При использовании же команды
<tt class="docutils literal"><span class="pre">generate:bundle</span></tt> - это действие производится автоматически.</p>
</div>
</div>
<div class="section" id="id7">
<h3>Структура директории пакета<a class="headerlink" href="#id7" title="Ссылка на этот заголовок">¶</a></h3>
<p>Структура директории пакета проста и гибка. По умолчанию, система пакетов
следует некоторым соглашениям, которые помогают поддерживать стилевое единообразие
во всех пакетах Symfony2. Давайте взглянем на пакет <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt>, так
как он содержит наиболее основные элементы пакета:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Controller/</span></tt> содержит контроллеры пакета (например <tt class="docutils literal"><span class="pre">HelloController.php</span></tt>);</li>
<li><tt class="docutils literal"><span class="pre">Resources/config/</span></tt> дом для конфигурационных файлов, включая конфигурацию
маршрутизатора (например <tt class="docutils literal"><span class="pre">routing.yml</span></tt>);</li>
<li><tt class="docutils literal"><span class="pre">Resources/views/</span></tt> шаблоны, сгруппированные по имени контроллера (например
<tt class="docutils literal"><span class="pre">Hello/index.html.twig</span></tt>);</li>
<li><tt class="docutils literal"><span class="pre">Resources/public/</span></tt> публично доступные ресурсы (картинки, стили…),
которые будут скопированы или связаны символической ссылкой с <tt class="docutils literal"><span class="pre">web/</span></tt> директорией
при помощи консольной команды <tt class="docutils literal"><span class="pre">assets:install</span></tt>;</li>
<li><tt class="docutils literal"><span class="pre">Tests/</span></tt> содержит все тесты пакета.</li>
</ul>
<p>Пакет может быть как маленьким, так и большим – в зависимости от задачи,
которую он реализует. Он содержит лишь те файлы, которые нужны – и ничего более.</p>
<p>В других главах книги вы также узнаете, как работать с базой данных, как
создавать и валидировать формы, создавать файлы переводов, писать тесты и
много чего ещё. Все эти объекты в пакете имеют определенную роль и место.</p>
</div>
</div>
<div class="section" id="id8">
<h2>Конфигурация приложения<a class="headerlink" href="#id8" title="Ссылка на этот заголовок">¶</a></h2>
<p>Приложение состоит из набора пакетов, реализующих все необходимые функции вашего приложения.
Каждый пакет может быть настроен при помощи конфигурационных файлов, написанных на YAML,
XML или PHP. По умолчанию, основной конфигурационный файл расположен в директории
<tt class="docutils literal"><span class="pre">app/config/</span></tt> и называется <tt class="docutils literal"><span class="pre">config.yml</span></tt>, <tt class="docutils literal"><span class="pre">config.xml</span></tt> или <tt class="docutils literal"><span class="pre">config.php</span></tt>, в
зависимости от предпочитаемого вами формата:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><pre># app/config/config.yml
imports:
    - { resource: parameters.yml }
    - { resource: security.yml }

framework:
    secret:          %secret%
    charset:         UTF-8
    router:          { resource: "%kernel.root_dir%/config/routing.yml" }
    form:            true
    csrf_protection: true
    validation:      { enable_annotations: true }
    templating:      { engines: ['twig'] } #assets_version: SomeVersionScheme
    session:
        default_locale: %locale%
        auto_start:     true

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%

# ...</pre>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="nt">&lt;imports&gt;</span>
    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;parameters.yml&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;security.yml&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/imports&gt;</span>

<span class="nt">&lt;framework:config</span> <span class="na">charset=</span><span class="s">&quot;UTF-8&quot;</span> <span class="na">secret=</span><span class="s">&quot;%secret%&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;framework:router</span> <span class="na">resource=</span><span class="s">&quot;%kernel.root_dir%/config/routing.xml&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;framework:form</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;framework:csrf-protection</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;framework:validation</span> <span class="na">annotations=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;framework:templating</span> <span class="na">assets-version=</span><span class="s">&quot;SomeVersionScheme&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;framework:engine</span> <span class="na">id=</span><span class="s">&quot;twig&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/framework:templating&gt;</span>
    <span class="nt">&lt;framework:session</span> <span class="na">default-locale=</span><span class="s">&quot;%locale%&quot;</span> <span class="na">auto-start=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/framework:config&gt;</span>

<span class="c">&lt;!-- Twig Configuration --&gt;</span>
<span class="nt">&lt;twig:config</span> <span class="na">debug=</span><span class="s">&quot;%kernel.debug%&quot;</span> <span class="na">strict-variables=</span><span class="s">&quot;%kernel.debug%&quot;</span> <span class="nt">/&gt;</span>

<span class="c">&lt;!-- ... --&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;parameters.yml&#39;</span><span class="p">);</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;security.yml&#39;</span><span class="p">);</span>

<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;secret&#39;</span>          <span class="o">=&gt;</span> <span class="s1">&#39;%secret%&#39;</span><span class="p">,</span>
    <span class="s1">&#39;charset&#39;</span>         <span class="o">=&gt;</span> <span class="s1">&#39;UTF-8&#39;</span><span class="p">,</span>
    <span class="s1">&#39;router&#39;</span>          <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;resource&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;%kernel.root_dir%/config/routing.php&#39;</span><span class="p">),</span>
    <span class="s1">&#39;form&#39;</span>            <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(),</span>
    <span class="s1">&#39;csrf-protection&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(),</span>
    <span class="s1">&#39;validation&#39;</span>      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;annotations&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">),</span>
    <span class="s1">&#39;templating&#39;</span>      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;engines&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;twig&#39;</span><span class="p">),</span>
        <span class="c1">#&#39;assets_version&#39; =&gt; &quot;SomeVersionScheme&quot;,</span>
    <span class="p">),</span>
    <span class="s1">&#39;session&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;default_locale&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;%locale%&quot;</span><span class="p">,</span>
        <span class="s1">&#39;auto_start&#39;</span>     <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">));</span>

<span class="c1">// Twig Configuration</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;twig&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;debug&#39;</span>            <span class="o">=&gt;</span> <span class="s1">&#39;%kernel.debug%&#39;</span><span class="p">,</span>
    <span class="s1">&#39;strict_variables&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;%kernel.debug%&#39;</span><span class="p">,</span>
<span class="p">));</span>

<span class="c1">// ...</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Подробнее о том, как загружать каждый файл/формат будет рассказано
в следующей секции - <a class="reference internal" href="#id9">Окружения</a>.</p>
</div>
<p>Каждый параметр верхнего уровня, например <tt class="docutils literal"><span class="pre">framework</span></tt> или <tt class="docutils literal"><span class="pre">twig</span></tt>,
определяет настройки конкретного пакета. Например, ключ <tt class="docutils literal"><span class="pre">framework</span></tt> определяет
настройки ядра Symfony <tt class="docutils literal"><span class="pre">FrameworkBundle</span></tt> и включает настройки маршрутизации,
шаблонизатора и прочих ключевых систем.</p>
<p>Пока же нам не стоит беспокоиться о конкретных настройках в каждой секции.
Файл настроек по умолчанию содержит все необходимые параметры. По ходу чтения
прочей документации вы ознакомитесь со всеми специфическими настройками.</p>
<div class="sidebar">
<p class="first sidebar-title">Форматы конфигураций</p>
<p>Во всех главах книги все примеры конфигураций будут показаны во всех трех
форматах (YAML, XML and PHP). Каждый из них имеет свои достоинства и недостатки.
Выбор же формата целиком зависит о ваших предпочтений:</p>
<ul class="last simple">
<li><em>YAML</em>: Простой, понятный и читабельный;</li>
<li><em>XML</em>: В разы более мощный, нежели YAML, к тому же многие современные IDE поддерживают автозавершение в XML;</li>
<li><em>PHP</em>: Очень мощный, но менее читабельный, чем стандартные форматы конфигурационных файлов.</li>
</ul>
</div>
</div>
<div class="section" id="environments-summary">
<span id="index-3"></span><span id="id9"></span><h2>Окружения<a class="headerlink" href="#environments-summary" title="Ссылка на этот заголовок">¶</a></h2>
<p>Приложение можно запускать в различных окружениях. Различные окружения используют
один и тот же PHP код (за исключением фронт-контроллера), но могут иметь совершенно
различные настройки. Например, <tt class="docutils literal"><span class="pre">dev</span></tt> окружение ведет лог ошибок и замечаний, в
то время как <tt class="docutils literal"><span class="pre">prod</span></tt> окружение логгирует только ошибки. В <tt class="docutils literal"><span class="pre">dev</span></tt> некоторые
файлы пересоздаются при каждом запросе, но кэшируются в <tt class="docutils literal"><span class="pre">prod</span></tt> окружении.
В то же время, все окружения одновременно доступны на одной и той же машине.</p>
<p>Проект Symfony2 по умолчанию имеет три окружения (<tt class="docutils literal"><span class="pre">dev</span></tt>, <tt class="docutils literal"><span class="pre">test</span></tt> и <tt class="docutils literal"><span class="pre">prod</span></tt>),
хотя создать новое окружение не сложно. Вы можете смотреть ваше приложение
в различных окружениях просто меняя фронт-контроллеры в браузере. Для того
чтобы отобразить приложение в dev окружении, откройте его при помощи
фронт контроллера <tt class="docutils literal"><span class="pre">app_dev.php</span></tt>:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app_dev.php/hello/Ryan
</pre></div>
</div>
<p>Если же вы хотите посмотреть, как поведёт себя приложение в продуктовом
окружении, вы можете вызвать фронт-контроллер <tt class="docutils literal"><span class="pre">prod</span></tt>:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app.php/hello/Ryan
</pre></div>
</div>
<p>Так как <tt class="docutils literal"><span class="pre">prod</span></tt> окружение оптимизировано для скорости, настройки, маршруты
и шаблоны Twig компилируются в плоские PHP классы и кэшируются. Когда вы
хотите посмотреть изменения в продуктовом окружении, вам потребуется удалить
эти файлы чтобы они пересоздались автоматически:</p>
<div class="highlight-python"><pre>php app/console cache:clear --env=prod --no-debug</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p>Если вы откроете файл <tt class="docutils literal"><span class="pre">web/app.php</span></tt>, вы обнаружите, что он однозначно
настроен на использование <tt class="docutils literal"><span class="pre">prod</span></tt> окружения:</p>
<div class="highlight-python"><pre>$kernel = new AppKernel('prod', false);</pre>
</div>
<p class="last">Вы можете создать новый фронт-контроллер для нового окружения просто
скопировав этот файл и изменив <tt class="docutils literal"><span class="pre">prod</span></tt> на другое значение.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Примечание</p>
<p class="last">Тестовое окружение (<tt class="docutils literal"><span class="pre">test</span></tt>) используется при запуске автотестов и его
нельзя напрямую открыть через браузер. Подробнее об это можно почитать в главе
<a class="reference internal" href="testing.html"><em>Тестирование</em></a>.</p>
</div>
<div class="section" id="index-4">
<span id="id10"></span><h3>Настройка окружений<a class="headerlink" href="#index-4" title="Ссылка на этот заголовок">¶</a></h3>
<p>Класс <tt class="docutils literal"><span class="pre">AppKernel</span></tt> отвечает за загрузку конфигурационных файлов:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// app/AppKernel.php</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">registerContainerConfiguration</span><span class="p">(</span><span class="nx">LoaderInterface</span> <span class="nv">$loader</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="nx">__DIR__</span><span class="o">.</span><span class="s1">&#39;/config/config_&#39;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getEnvironment</span><span class="p">()</span><span class="o">.</span><span class="s1">&#39;.yml&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Вы уже знаете, что расширение <tt class="docutils literal"><span class="pre">.yml</span></tt> может быть изменено на <tt class="docutils literal"><span class="pre">.xml</span></tt> или <tt class="docutils literal"><span class="pre">.php</span></tt>,
если вы предпочитаете использовать XML или PHP для файлов конфигурации. Имейте
также в виду, что каждое окружение загружает свои собственные настройки.
Рассмотрим конфигурационный файл для <tt class="docutils literal"><span class="pre">dev</span></tt> окружения.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config_dev.yml</span>
<span class="l-Scalar-Plain">imports</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">resource</span><span class="p-Indicator">:</span> <span class="nv">config.yml</span> <span class="p-Indicator">}</span>

<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">router</span><span class="p-Indicator">:</span>   <span class="p-Indicator">{</span> <span class="nv">resource</span><span class="p-Indicator">:</span> <span class="s">&quot;%kernel.root_dir%/config/routing_dev.yml&quot;</span> <span class="p-Indicator">}</span>
    <span class="l-Scalar-Plain">profiler</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">only_exceptions</span><span class="p-Indicator">:</span> <span class="nv">false</span> <span class="p-Indicator">}</span>

<span class="c1"># ...</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config_dev.xml --&gt;</span>
<span class="nt">&lt;imports&gt;</span>
    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;config.xml&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/imports&gt;</span>

<span class="nt">&lt;framework:config&gt;</span>
    <span class="nt">&lt;framework:router</span> <span class="na">resource=</span><span class="s">&quot;%kernel.root_dir%/config/routing_dev.xml&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;framework:profiler</span> <span class="na">only-exceptions=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/framework:config&gt;</span>

<span class="c">&lt;!-- ... --&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// app/config/config_dev.php</span>
<span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">import</span><span class="p">(</span><span class="s1">&#39;config.php&#39;</span><span class="p">);</span>

<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;framework&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;router&#39;</span>   <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;resource&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;%kernel.root_dir%/config/routing_dev.php&#39;</span><span class="p">),</span>
    <span class="s1">&#39;profiler&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;only-exceptions&#39;</span> <span class="o">=&gt;</span> <span class="k">false</span><span class="p">),</span>
<span class="p">));</span>

<span class="c1">// ...</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Ключ <tt class="docutils literal"><span class="pre">imports</span></tt> похож по действию на выражение <tt class="docutils literal"><span class="pre">include</span></tt> в PHP и
гарантирует что главный конфигурационный файл (<tt class="docutils literal"><span class="pre">config.yml</span></tt>) будет загружен
в первую очередь. Остальной код корректирует конфигурацию по умолчанию для
увеличения порога логгирования и прочих настроек, специфичных для
процесса разработки.</p>
<p>Оба окружения – <tt class="docutils literal"><span class="pre">prod</span></tt> и <tt class="docutils literal"><span class="pre">test</span></tt> следуют той же модели: каждое окружение
импортирует базовые настройки и модифицирует их значения для своих нужд. Это
соглашение позволяет повторно использовать большую часть настроек и изменять
лишь те из них, которые требует окружение.</p>
</div>
</div>
<div class="section" id="id11">
<h2>Заключение<a class="headerlink" href="#id11" title="Ссылка на этот заголовок">¶</a></h2>
<p>Поздравляем! Вы усвоили все фундаментальные аспекты Symfony2 и обнаружили,
какими лёгкими и в то же время гибкими они могут быть. И, поскольку на подходе
ещё <em>много интересного</em>, обязательно запомните следующие положения:</p>
<ul class="simple">
<li>создание страниц – это три простых шага, включающих <strong>маршрут</strong>, <strong>контроллер</strong>
и (опционально) <strong>шаблон</strong>;</li>
<li>каждое приложение должно содержать 4 основных директории: <tt class="docutils literal"><span class="pre">web/</span></tt> (ассеты и фронт-контроллеры),
<tt class="docutils literal"><span class="pre">app/</span></tt> (настройки), <tt class="docutils literal"><span class="pre">src/</span></tt> (ваши пакеты), и <tt class="docutils literal"><span class="pre">vendor/</span></tt> (сторонние библиотеки)
(также ещё имеется директория <tt class="docutils literal"><span class="pre">bin/</span></tt> для обновления вендоров);</li>
<li>Каждая функция в Symfony2 (включая ядро фреймворка) должна располагаться внутри <em>пакета</em>,
который представляет собой структурированный набор файлов, реализующих эту функцию;</li>
<li><em>настройки</em> каждого пакета располагаются в директории <tt class="docutils literal"><span class="pre">app/config</span></tt> и могут быть записаны
в формате YAML, XML или PHP;</li>
<li>каждое <strong>окружение</strong> доступно через свой отдельный фронт-контроллер
(например <tt class="docutils literal"><span class="pre">app.php</span></tt> и <tt class="docutils literal"><span class="pre">app_dev.php</span></tt>) и загружает отдельный файл
настроек;</li>
</ul>
<p>Далее, каждая глава книги познакомит вас с все более и более мощными инструментами и
более глубокими концепциями. Чем больше вы знаете о Symfony2, тем больше вы будете
ценить гибкость его архитектуры и его обширные возможности для быстрой разработки
приложений.</p>
<div class="toctree-wrapper compound">
</div>
</div>
</div>


      </div>
      <!-- /#content -->

  </div>
  <!-- /#wrapper -->

  <div id="copyright">
      <div id="copyright_wrapper">
          <ul class="left">
              <li><a href="/ru/">Главная</a></li>
              <li><a href="/content/ru/about/">О проекте</a></li>
          </ul>
          <!-- /.left content-->
          <span class="right">
              Этот сайт создал и поддерживает <a href="http://hudson.su" target="_blank">Дмитрий Быкадоров</a> 2011
              <br/>
              <b>Symfony</b> is a <a href="http://symfony.com/trademark" target="_blank">trademark of Fabien Potencier</a>. All rights reserved.
          </span>
          <!-- /.right content-->
      </div>
      <!-- /#copyright _wrapper-->
  </div>

  <!-- Yandex.Metrika counter -->
  <div style="display:none;"><script type="text/javascript">
  (function(w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter9710512 = new Ya.Metrika({id:9710512, enableAll: true, trackHash:true});
          }
          catch(e) { }
      });
  })(window, "yandex_metrika_callbacks");
  </script></div>
  <script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript" defer="defer"></script>
  <noscript><div><img src="//mc.yandex.ru/watch/9710512" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
  <!-- /Yandex.Metrika counter -->

  <!-- Google analytics -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-11137454-5']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <!-- /Google analytics -->

  </body>
</html>